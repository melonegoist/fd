# FinDash - Financial Dashboard

Веб-приложение для отслеживания криптовалют в реальном времени с возможностью формирования отчетов и управления избранными валютами.

## Описание

FinDash предоставляет инструменты для мониторинга курсов криптовалют, визуализации данных на графиках, управления списками отслеживаемых валют и генерации отчетов в различных форматах. Приложение использует WebSocket для получения обновлений курсов в реальном времени.

## Стек технологий

### Основные технологии
- React 19.1.1
- TypeScript 5.9.3
- Vite 7.1.7
- React Router DOM 7.9.6

### Библиотеки для визуализации
- Chart.js 4.5.1
- react-chartjs-2 5.3.1
- chartjs-adapter-date-fns 3.0.0

### Утилиты
- date-fns 4.1.0
- crypto-js 4.2.0
- jspdf 3.0.3
- jspdf-autotable 5.0.2

### Инструменты разработки
- ESLint 9.38.0
- Prettier 2.8.8
- Stylelint 16.25.0
- Jest 30.2.0

## Установка

```bash
npm install
```

## Запуск

### Режим разработки
```bash
npm run dev
```
Приложение будет доступно по адресу http://localhost:5173

### Продакшн сборка
```bash
npm run build
npm run preview
```

## Структура проекта

```
src/
├── components/              # React компоненты
│   ├── AuthView.tsx        # Форма авторизации
│   ├── Confirm.tsx         # Страница подтверждения входа
│   ├── Dashboard.tsx       # Главная панель с графиками
│   ├── TrackingPage.tsx    # Страница управления валютами
│   ├── ReportsPage.tsx     # Страница формирования отчетов
│   ├── Layout.tsx          # Общий layout с навигацией
│   ├── PrivateRoute.tsx    # Компонент защищенного маршрута
│   ├── CurrencyCard.tsx    # Карточка валюты
│   ├── ChartsView.tsx      # Компонент с графиками
│   ├── ValueLocator.tsx    # Поиск и добавление валют
│   ├── TrackingList.tsx    # Список отслеживаемых валют
│   ├── HistoryList.tsx     # Список истории валют
│   ├── FavoritesList.tsx   # Список избранных валют
│   ├── ReportForm.tsx      # Форма создания отчета
│   └── ReportHistory.tsx   # История отчетов
├── context/                # React Context провайдеры
│   ├── AuthContext.tsx     # Контекст авторизации
│   ├── CurrencyContext.tsx # Контекст валют
│   └── ReportContext.tsx   # Контекст отчетов
├── services/               # Бизнес-логика и API
│   ├── AuthService.ts      # Сервис авторизации
│   ├── MockAuthAPI.ts      # Мок API для авторизации
│   ├── CurrencyAPI.ts      # API для работы с валютами
│   ├── CurrencyController.ts # Контроллер управления валютами
│   ├── WebSocketService.ts # WebSocket сервис для обновлений
│   ├── StorageService.ts   # Сервис локального хранилища
│   ├── ReportService.ts    # Сервис генерации отчетов
│   └── UpdateGraphicsService.ts # Сервис обновления графиков
├── styles/                 # CSS стили для компонентов
├── types/                  # TypeScript типы
└── utils/                  # Вспомогательные утилиты
```

## Основной функционал

### Авторизация

Приложение использует систему авторизации с сохранением токена в localStorage. После успешного входа пользователь перенаправляется на страницу подтверждения, а затем на главную панель.

**Компоненты:**
- `AuthView` - форма входа с валидацией email и пароля
- `Confirm` - страница подтверждения успешной авторизации
- `PrivateRoute` - компонент для защиты маршрутов, требующих авторизации

**Сервисы:**
- `AuthService` - обработка логина и выхода
- `MockAuthAPI` - мок API для разработки

### Отслеживание валют

Приложение поддерживает отслеживание курсов криптовалют в реальном времени через WebSocket соединение. Доступные валюты: BTC, ETH, USDT, BNB, XRP, SOL, ADA.

**Компоненты:**
- `Dashboard` - главная панель с графиками и списком отслеживаемых валют
- `CurrencyCard` - карточка валюты с текущим курсом и изменением за 24 часа
- `ChartsView` - графики изменения курса выбранной валюты
- `ValueLocator` - поиск и добавление валют для отслеживания

**Сервисы:**
- `CurrencyAPI` - получение данных о валютах
- `WebSocketService` - обновление курсов в реальном времени (каждые 2 секунды)
- `CurrencyContext` - глобальное состояние валют

### Управление валютами

Страница отслеживания позволяет управлять списками валют: отслеживаемые, история и избранное.

**Компоненты:**
- `TrackingPage` - главная страница управления
- `TrackingList` - список отслеживаемых валют с возможностью добавления в историю и избранное
- `HistoryList` - история просмотренных валют (до 50 записей)
- `FavoritesList` - список избранных валют (до 20 записей)

**Сервисы:**
- `CurrencyController` - управление операциями с валютами
- `StorageService` - работа с localStorage для истории и избранного

### Отчеты

Система генерации отчетов позволяет создавать отчеты по валютам за выбранный период в форматах PDF и CSV.

**Компоненты:**
- `ReportsPage` - страница работы с отчетами
- `ReportForm` - форма создания отчета с выбором валюты, периода и интервала
- `ReportHistory` - история созданных отчетов (до 20 записей)

**Сервисы:**
- `ReportService` - генерация отчетов в PDF и CSV форматах
- `ReportContext` - управление состоянием отчетов

**Параметры отчета:**
- Валюта (символ)
- Начальная и конечная даты
- Интервал: 1 час, 1 день, 1 неделя
- Формат: PDF или CSV

**Содержание отчета:**
- Текущая цена
- Изменение за 24 часа
- Минимальная, максимальная и средняя цена за период
- История цен с временными метками

## Маршруты

- `/` - Страница авторизации
- `/confirm` - Подтверждение входа (защищенный маршрут)
- `/dashboard` - Главная панель с графиками (защищенный маршрут)
- `/tracking` - Управление валютами (защищенный маршрут)
- `/reports` - Формирование отчетов (защищенный маршрут)
- `*` - Редирект на главную страницу

## Контексты

### AuthContext
Управляет состоянием авторизации пользователя:
- `user` - данные пользователя
- `token` - токен авторизации
- `login(token, user)` - функция входа
- `logout()` - функция выхода
- `isAuthenticated` - флаг авторизации

### CurrencyContext
Управляет состоянием валют:
- `currencies` - Map валют с данными
- `selectedCurrency` - выбранная валюта
- `addCurrency(data)` - добавление валюты
- `removeCurrency(symbol)` - удаление валюты
- `subscribeToCurrency(symbol)` - подписка на обновления
- `unsubscribeFromCurrency(symbol)` - отписка от обновлений

### ReportContext
Управляет состоянием отчетов:
- `currentReport` - текущий сгенерированный отчет
- `isGenerating` - флаг генерации отчета
- `error` - ошибка при генерации
- `generateReport(params)` - функция генерации отчета

## Локальное хранилище

Приложение использует localStorage для сохранения:
- `token` - токен авторизации
- `user` - данные пользователя
- `currency_history` - история просмотренных валют
- `currency_favorites` - избранные валюты
- `reports_history` - история отчетов

## Скрипты

```bash
npm run dev              # Запуск dev сервера
npm run build            # Продакшн сборка
npm run preview          # Предпросмотр продакшн сборки
npm run lint             # Проверка ESLint
npm run prettier:check   # Проверка форматирования кода
npm run prettier:fix     # Автоматическое исправление форматирования
npm run test:unit        # Запуск unit тестов
npm run test:e2e         # Запуск E2E тестов
```

## Требования

- Node.js >= 18
- npm >= 9

## Особенности реализации

### WebSocket обновления
WebSocket сервис имитирует обновления курсов каждые 2 секунды с небольшой волатильностью. При подписке на валюту создается интервал обновлений, который автоматически очищается при отписке.

### Мок данные
В режиме разработки используются мок данные для:
- Авторизации (MockAuthAPI)
- Курсов валют (CurrencyAPI)
- WebSocket обновлений (WebSocketService)

### Обработка ошибок
Все сервисы включают обработку ошибок с выводом уведомлений пользователю. Ошибки сети и API обрабатываются на уровне компонентов.

### Производительность
- Использование React Context для глобального состояния
- Мемоизация функций через useCallback
- Автоматическая очистка подписок при размонтировании компонентов
- Ограничение размера истории (50 для истории валют, 20 для избранного и отчетов)

## Разработка

1. Клонируйте репозиторий
2. Установите зависимости: `npm install`
3. Запустите dev сервер: `npm run dev`
4. Откройте http://localhost:5173 в браузере

## Лицензия

Проект разработан в учебных целях.
